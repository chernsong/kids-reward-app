<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å…„å¼ŸåŸºåœ° | ç»å¯†ä»»åŠ¡ä¸­å¿ƒ</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/nes.css@2.3.0/css/nes.min.css" rel="stylesheet" />
    
    <style>
        body {
            background-color: #202020;
            font-family: 'Press Start 2P', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: white;
            /* å¢åŠ ä¸€ç‚¹èƒŒæ™¯ç½‘æ ¼ï¼Œæ›´æœ‰ç§‘æŠ€æ„Ÿ */
            background-image: radial-gradient(#333 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .game-container {
            width: 95%;
            max-width: 500px;
            background-color: #fff;
            color: #000;
            padding: 15px;
            border: 4px solid #000;
            box-shadow: 10px 10px 0px #000;
            position: relative;
        }
        
        /* ç™»å½•ç•Œé¢ */
        #loginScreen { text-align: center; padding: 20px; }
        .hero-select-btn { 
            width: 100%; 
            margin-bottom: 25px; 
            height: 100px; 
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: left;
            padding: 0 20px;
        }
        .hero-icon { font-size: 40px; margin-right: 20px; }
        .hero-info { display: flex; flex-direction: column; }
        .hero-title { font-size: 16px; font-weight: bold; margin-bottom: 5px; }
        .hero-sub { font-size: 10px; opacity: 0.8; }

        /* æ¸¸æˆä¸»ç•Œé¢ */
        #gameScreen { display: none; }

        .top-bar { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 15px; 
            background: #000; 
            color: #fff; 
            padding: 10px; 
            font-size: 12px;
        }
        
        /* å® ç‰©/æœºç”²å±•ç¤º */
        .mecha-stage {
            background-color: #209cee; /* å“¥å“¥é»˜è®¤è“ */
            padding: 20px;
            text-align: center;
            border: 4px solid #000;
            margin-bottom: 15px;
            transition: background-color 0.3s;
        }
        .avatar-box { 
            font-size: 80px; 
            animation: hover 3s infinite ease-in-out;
            filter: drop-shadow(5px 5px 0px rgba(0,0,0,0.3));
        }

        /* ä»»åŠ¡ç½‘æ ¼ */
        .mission-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .mission-btn {
            height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            border-width: 4px;
        }
        
        @keyframes hover { 
            0%, 100% { transform: translateY(0); } 
            50% { transform: translateY(-15px); } 
        }
    </style>
</head>
<body>

<div class="game-container">
    
    <div id="loginScreen">
        <h3 style="margin-bottom:30px; text-transform: uppercase;">âš”ï¸ é€‰æ‹©ä½œæˆ˜å•ä½</h3>
        
        <button class="nes-btn is-primary hero-select-btn" onclick="login('bigBoy')">
            <span class="hero-icon">ğŸ¤–</span>
            <div class="hero-info">
                <span class="hero-title">æœºç”²æŒ‡æŒ¥å®˜</span>
                <span class="hero-sub">ä»£å·ï¼šå“¥å“¥ (Lv.9)</span>
            </div>
        </button>
        
        <button class="nes-btn is-error hero-select-btn" onclick="login('smallBoy')">
            <span class="hero-icon">ğŸ¦–</span>
            <div class="hero-info">
                <span class="hero-title">å…½ç‹å…ˆé”‹</span>
                <span class="hero-sub">ä»£å·ï¼šå¼Ÿå¼Ÿ (Lv.4)</span>
            </div>
        </button>

        <p style="font-size:10px; color:#888; margin-top:30px;">ç³»ç»ŸçŠ¶æ€: è‡ªåŠ¨å­˜æ¡£å·²æ¿€æ´»</p>
    </div>

    <div id="gameScreen">
        <div class="top-bar">
            <span style="cursor:pointer" onclick="location.reload()">â—€ åˆ‡æ¢åŸºåœ°</span>
            <span id="baseName">åŸºåœ°</span>
        </div>

        <div class="mecha-stage" id="stageBg">
            <div id="petAvatar" class="avatar-box">ğŸ¤–</div>
            <div style="margin-top:10px; font-weight:bold;">
                Lv.<span id="levelNum">1</span> <span id="petName">åŸå‹æœº</span>
            </div>
            <div style="margin-top:15px; background:#000; padding:2px; border-radius:4px;">
                <div id="xpBarFill" style="width:0%; height:10px; background:#fff; transition: width 0.5s;"></div>
            </div>
            <div style="font-size:10px; margin-top:5px;">èƒ½é‡å……èƒ½ä¸­...</div>
        </div>

        <div id="missionList" class="mission-grid"></div>
    </div>

</div>

<script>
    // === ç”·å­©ä¸“å±é…ç½® ===
    const CONFIG = {
        'bigBoy': {
            title: "æœºç”²æŒ‡æŒ¥å®˜",
            themeColor: "#209cee", // ç§‘æŠ€è“
            btnType: "is-primary",
            // 9å²ç”·å­©ï¼šå¼ºè°ƒæ™ºåŠ›ã€è‡ªå¾‹å’ŒåŠ›é‡
            tasks: [
                { id: 'hw', icon: 'âš¡', text: 'æƒ…æŠ¥è§£ç ', sub:'(åšåŠŸè¯¾)', xp: 60 },
                { id: 'read', icon: 'ğŸ›°ï¸', text: 'æˆ˜æœ¯ç ”ç©¶', sub:'(é˜…è¯»)', xp: 30 },
                { id: 'clean', icon: 'ğŸ›¡ï¸', text: 'åŸºåœ°ç»´æŠ¤', sub:'(æ•´ç†)', xp: 40 },
                { id: 'sport', icon: 'ğŸ‹ï¸', text: 'ä½“èƒ½ç‰¹è®­', sub:'(è¿åŠ¨)', xp: 50 }
            ]
        },
        'smallBoy': {
            title: "å…½ç‹å…ˆé”‹",
            themeColor: "#e76e55", // æˆ˜æ–—çº¢
            btnType: "is-error",
            // 4å²ç”·å­©ï¼šå¼ºè°ƒå…·ä½“åŠ¨ä½œã€å«ç”Ÿå’Œå¬è¯
            tasks: [
                { id: 'teeth', icon: 'ğŸ¦·', text: 'æœºä½“é™¤é”ˆ', sub:'(åˆ·ç‰™)', xp: 50 }, 
                { id: 'toy', icon: 'ğŸ’£', text: 'æˆ˜åœºæ¸…ç†', sub:'(æ”¶ç©å…·)', xp: 50 },
                { id: 'eat', icon: 'ğŸ–', text: 'è¡¥å……ç‡ƒæ–™', sub:'(åƒé¥­)', xp: 40 },
                { id: 'sleep', icon: 'ğŸ’¤', text: 'ç³»ç»Ÿä¼‘çœ ', sub:'(ç¡è§‰)', xp: 60 }
            ]
        }
    };

    // è¿›åŒ–è·¯çº¿ï¼šæ›´é…·ç‚«ï¼Œå«æœºç”²å’Œé¾™
    const EVOLUTION_PATH = [
        {icon:"ğŸ¥š", name:"ä¼‘çœ èˆ±"},
        {icon:"ğŸ£", name:"æ–°å…µå…½"},
        {icon:"ğŸ¦–", name:"æš´é¾™å…½"},
        {icon:"ğŸ¦", name:"é‡‘åˆšæˆ˜ç¥"},
        {icon:"ğŸ¤–", name:"é‡è£…æœºç”²"},
        {icon:"ğŸ²", name:"ç©¶æç¥é¾™"},
        {icon:"ğŸ‘‘", name:"å®‡å®™éœ¸ä¸»"}
    ];

    let currentUser = null;
    let userData = {};

    // === ç™»å½• ===
    function login(userId) {
        currentUser = userId;
        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('gameScreen').style.display = 'block';
        
        const saved = localStorage.getItem('boys_base_' + userId);
        userData = saved ? JSON.parse(saved) : { xp: 0, level: 1, evoIndex: 0 };

        renderScreen();
    }

    // === æ¸²æŸ“ ===
    function renderScreen() {
        const cfg = CONFIG[currentUser];
        
        // è®¾ç½®é¢œè‰²ä¸»é¢˜
        document.getElementById('stageBg').style.backgroundColor = cfg.themeColor;
        document.getElementById('baseName').innerText = cfg.title + "æ§åˆ¶å°";

        // è®¾ç½®å® ç‰©çŠ¶æ€
        const evo = EVOLUTION_PATH[userData.evoIndex] || EVOLUTION_PATH[EVOLUTION_PATH.length-1];
        document.getElementById('petAvatar').innerText = evo.icon;
        document.getElementById('petName').innerText = evo.name;
        document.getElementById('levelNum').innerText = userData.level;

        // è®¡ç®—è¿›åº¦æ¡ç™¾åˆ†æ¯”
        const maxXp = 100 + (userData.level * 50);
        const pct = Math.min(100, (userData.xp / maxXp) * 100);
        document.getElementById('xpBarFill').style.width = pct + "%";

        // ç”Ÿæˆä»»åŠ¡æŒ‰é’®
        const list = document.getElementById('missionList');
        list.innerHTML = '';
        cfg.tasks.forEach(task => {
            list.innerHTML += `
                <button class="nes-btn ${cfg.btnType} mission-btn" onclick="completeMission(${task.xp}, '${task.text}')">
                    <span style="font-size:24px; margin-bottom:5px;">${task.icon}</span>
                    <span>${task.text}</span>
                    <span style="font-size:9px; opacity:0.7; margin-top:3px;">${task.sub}</span>
                </button>
            `;
        });
    }

    // === å®Œæˆä»»åŠ¡ ===
    function completeMission(xp, text) {
        userData.xp += xp;
        const maxXp = 100 + (userData.level * 50);
        
        alert(`âœ… ä»»åŠ¡ç¡®è®¤ï¼š[${text}] å®Œæˆï¼\nğŸ”‹ èƒ½é‡æ³¨å…¥: +${xp}`);

        // å‡çº§é€»è¾‘
        if (userData.xp >= maxXp) {
            userData.level++;
            userData.xp = 0;
            
            // æ¯3çº§è¿›åŒ–
            if (userData.level % 3 === 0 && userData.evoIndex < EVOLUTION_PATH.length - 1) {
                userData.evoIndex++;
                const newForm = EVOLUTION_PATH[userData.evoIndex];
                alert(`ğŸš¨ è­¦å‘Šï¼è­¦å‘Šï¼\nç”Ÿç‰©ä¿¡å·æ”¹å˜... è¿›åŒ–ä¸º [${newForm.name}]ï¼`);
            } else {
                alert(`ğŸ†™ æƒé™æå‡ï¼å½“å‰ç­‰çº§: Lv.${userData.level}`);
            }
        }

        localStorage.setItem('boys_base_' + currentUser, JSON.stringify(userData));
        renderScreen();
    }
</script>

</body>
</html>