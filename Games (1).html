<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Minecraft vs Chuggington | è‡ªå¾‹æŒ‘æˆ˜</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Fredoka+One&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/nes.css@2.3.0/css/nes.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet"/>
    
    <style>
        /* === å…¨å±€è®¾ç½® === */
        body { margin: 0; padding: 0; overflow-x: hidden; user-select: none; -webkit-tap-highlight-color: transparent; }
        .hidden { display: none !important; }
        .game-container { min-height: 100vh; padding: 15px; padding-bottom: 80px; box-sizing: border-box; }

        /* === 1. ç™»å½•ç•Œé¢ (Login) === */
        #loginScreen {
            height: 100vh;
            background: #111;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-family: 'VT323', monospace;
        }
        .login-title { color: #fff; font-size: 30px; margin-bottom: 40px; text-align: center; text-transform: uppercase; }
        
        .login-btn {
            width: 85%; max-width: 320px; height: 100px; margin-bottom: 25px;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            font-size: 24px; transition: transform 0.1s; position: relative;
        }
        .login-btn:active { transform: scale(0.95); }

        /* MC ç™»å½•æŒ‰é’® (è‰æ–¹å—é£æ ¼) */
        .btn-mc-login {
            background-color: #7a5836; /* åœŸè‰² */
            border: 4px solid #000;
            box-shadow: inset 0 10px 0 #5c9e43; /* è‰çš® */
            color: #fff; font-family: 'VT323', monospace;
        }
        
        /* Chuggington ç™»å½•æŒ‰é’® (ç«è½¦å¤´é£æ ¼) */
        .btn-chug-login {
            background: #d92b2b; /* å¨å°”é€Šçº¢ */
            border: 5px solid #fff;
            border-radius: 20px;
            color: white; font-family: 'Fredoka One', cursive;
            box-shadow: 0 5px 0 #9e1a1a;
        }

        /* === 2. é€šç”¨ç»„ä»¶ === */
        .top-bar {
            position: sticky; top: 0; z-index: 100;
            padding: 10px 15px; margin: -15px -15px 15px -15px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .back-btn { cursor: pointer; padding: 5px 10px; border-radius: 5px; background: rgba(0,0,0,0.3); color: white; font-size: 14px; }
        
        .grid-container {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
        }
        .section-header { margin: 25px 0 10px 0; text-align: center; }

        /* =========================================
           ğŸ¨ ä¸»é¢˜ A: Minecraft (å“¥å“¥)
           ========================================= */
        .theme-mc {
            background-color: #121212;
            /* æ¨¡æ‹ŸåŸºå²©/æ³¥åœŸçº¹ç† */
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjgiPgo8cmVjdCB3aWR0aD0iOCIgaGVpZ2h0PSI4IiBmaWxsPSIjM2EzYTNhIi8+CjxwYXRoIGQ9Ik0wIDBIMlYySDB6TTYgNkg4VjhINnoiIGZpbGw9IiM0ZTRlNGUiLz4KPC9zdmc+');
            font-family: 'VT323', monospace; color: #ddd;
        }
        .theme-mc .top-bar { background: #333; border-bottom: 4px solid #000; box-shadow: 0 4px 0 rgba(0,0,0,0.5); }
        .theme-mc .score-box { font-size: 40px; color: #55ff55; text-shadow: 2px 2px #000; }
        .theme-mc .level-badge { color: #ffff55; }
        
        .theme-mc .section-header {
            background: #555; color: #fff; border: 2px solid #000; padding: 5px;
            text-transform: uppercase; letter-spacing: 2px;
        }

        /* MC ç‰©å“æ æŒ‰é’® */
        .btn-mc {
            background: #8b8b8b; /* çŸ³å¤´è‰² */
            border: 3px solid;
            border-color: #fff #555 #555 #fff; /* ç»å…¸3Dè¾¹æ¡† */
            padding: 10px 2px; color: #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 16px; cursor: pointer; height: 90px;
        }
        .btn-mc:active { border-color: #555 #fff #fff #555; background: #777; }
        
        .btn-mc.negative { background: #522; color: #ffaaaa; border-color: #a55 #300 #300 #a55; }
        .mc-icon { font-size: 32px; margin-bottom: 5px; filter: drop-shadow(2px 2px 0 #000); }

        /* =========================================
           ğŸš‚ ä¸»é¢˜ B: Chuggington (å¼Ÿå¼Ÿ)
           ========================================= */
        .theme-chug {
            background-color: #87CEEB; /* å¤©ç©ºè“ */
            /* é“è½¨èƒŒæ™¯çº¹ç† */
            background-image: repeating-linear-gradient(90deg, transparent, transparent 48px, rgba(255,255,255,0.5) 48px, rgba(255,255,255,0.5) 52px), repeating-linear-gradient(0deg, transparent, transparent 48px, rgba(255,255,255,0.3) 48px, rgba(255,255,255,0.3) 52px);
            font-family: 'Fredoka One', cursive; color: #333;
        }
        .theme-chug .top-bar { background: #d92b2b; border-bottom: 5px dashed #fff; color: white; }
        .theme-chug .score-box { font-size: 45px; color: #fff; -webkit-text-stroke: 2px #d92b2b; text-shadow: 2px 2px 0 #333; }
        
        .theme-chug .section-header {
            background: #fff; color: #d92b2b; border-radius: 20px; display: inline-block; padding: 5px 20px;
            border: 3px solid #d92b2b; box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        /* Chuggington è½¦å¢æŒ‰é’® */
        .btn-chug {
            background: #fff;
            border: 3px solid #2168ac; /* é“è½¨è“ */
            border-radius: 15px;
            box-shadow: 0 6px 0 #2168ac;
            padding: 10px 2px; color: #2168ac;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 14px; cursor: pointer; height: 100px; transition: transform 0.1s;
        }
        .btn-chug:active { transform: translateY(6px); box-shadow: 0 0 0 #2168ac; }
        
        .btn-chug.negative { border-color: #d92b2b; color: #d92b2b; box-shadow: 0 6px 0 #d92b2b; background: #fff0f0; }
        .btn-chug.negative:active { box-shadow: 0 0 0 #d92b2b; }

        .chug-icon { font-size: 35px; margin-bottom: 5px; }

        /* åŠ¨ç”»ç±» */
        .pop { animation: animate__rubberBand 0.5s; }
        .shake { animation: animate__headShake 0.5s; }

    </style>
</head>
<body>

    <div id="loginScreen">
        <div class="login-title">é€‰æ‹©ä¸–ç•Œ / Choose World</div>
        
        <div class="login-btn btn-mc-login" onclick="enterGame('brother')">
            <span style="font-size:30px; margin-right:15px;">â›ï¸</span>
            <div>
                <div>MINECRAFT MODE</div>
                <div style="font-size:14px; opacity:0.8;">å“¥å“¥çš„ä¸–ç•Œ (Lv.9)</div>
            </div>
        </div>

        <div class="login-btn btn-chug-login" onclick="enterGame('younger')">
            <span style="font-size:30px; margin-right:15px;">ğŸš‚</span>
            <div>
                <div>CHUGGINGTON</div>
                <div style="font-size:14px; opacity:0.9;">å¼Ÿå¼Ÿçš„ç«è½¦ç«™ (Lv.4)</div>
            </div>
        </div>
    </div>

    <div id="gameApp" class="game-container hidden">
        <div class="top-bar">
            <div class="back-btn" onclick="location.reload()">â—€ é€€å‡º</div>
            <div style="text-align: center;">
                <div id="scoreValue" class="score-box">0</div>
                <div style="font-size:12px; opacity:0.8;">XP / èƒ½é‡</div>
            </div>
            <div class="level-badge">Lv.<span id="levelValue">1</span></div>
        </div>

        <div class="section-header" id="goodHeader">âœ… è·å¾—èµ„æº</div>
        <div class="grid-container" id="goodGrid"></div>

        <div class="section-header" id="badHeader" style="margin-top:30px; color:#ff5555 !important; border-color:#ff5555 !important;">âš ï¸ æ€ªç‰©è¢­å‡»</div>
        <div class="grid-container" id="badGrid"></div>
    </div>

<script>
    // === è¡Œä¸ºåˆ—è¡¨é…ç½® ===
    const TASKS_GOOD = [
        { name: "æ—©èµ·åºŠ", icon: "ğŸŒ…", score: 10 },
        { name: "åˆ·ç‰™", icon: "ğŸ¦·", score: 10 },
        { name: "ä¸Šå­¦", icon: "ğŸ«", score: 20 },
        { name: "åšå®¶åŠ¡", icon: "ğŸ§¹", score: 15 },
        { name: "æ”¶ç©å…·", icon: "ğŸ§¸", score: 15 },
        { name: "åšåŠŸè¯¾", icon: "ğŸ“", score: 25 },
        { name: "å¸®åŠ©äºº", icon: "ğŸ¤", score: 20 },
        { name: "è‡ªå·±åƒé¥­", icon: "ğŸ¥£", score: 10 },
        { name: "å†²å‡‰", icon: "ğŸš¿", score: 10 },
        { name: "æ—©ç¡è§‰", icon: "ğŸ’¤", score: 20 },
        { name: "æ”¶æ‹¾ä¹¦åŒ…", icon: "ğŸ’", score: 10 },
        { name: "å¤ä¹ åŠŸè¯¾", icon: "ğŸ“–", score: 20 },
        { name: "ç¥·å‘Š", icon: "ğŸ™", score: 15 },
        { name: "è¿åŠ¨", icon: "âš½", score: 15 }
    ];

    const TASKS_BAD = [
        { name: "æ‰“æ¶", icon: "âš”ï¸", score: -30 },
        { name: "äº‰åµ", icon: "ğŸ—£ï¸", score: -15 },
        { name: "ä¹±èµ°åŠ¨", icon: "ğŸƒ", score: -10 },
        { name: "æŒ‘é£Ÿ", icon: "ğŸ¥¦", score: -10 },
        { name: "æ‰å¼„äºº", icon: "ğŸ¤ª", score: -20 },
        { name: "å¤§å£°å–§å“—", icon: "ğŸ“¢", score: -10 },
        { name: "è®²éª—è¯", icon: "ğŸ¤¥", score: -50 },
        { name: "æ’å˜´", icon: "ğŸ¤«", score: -10 },
        { name: "è´Ÿé¢æƒ³æ³•", icon: "â˜ï¸", score: -10 }
    ];

    let currentUser = '';
    let score = 0;
    let level = 1;

    function enterGame(user) {
        currentUser = user;
        
        // 1. è¯»å–å­˜æ¡£
        const savedScore = localStorage.getItem('score_' + user);
        score = savedScore ? parseInt(savedScore) : 0;
        updateLevel();

        // 2. åˆ‡æ¢ç•Œé¢
        document.getElementById('loginScreen').classList.add('hidden');
        const app = document.getElementById('gameApp');
        app.classList.remove('hidden');

        // 3. åº”ç”¨çš®è‚¤
        const goodGrid = document.getElementById('goodGrid');
        const badGrid = document.getElementById('badGrid');
        
        if(user === 'brother') {
            // Minecraft æ¨¡å¼
            document.body.className = 'theme-mc';
            document.getElementById('goodHeader').innerText = "âš’ï¸ èµ„æºå¼€é‡‡ (Crafting)";
            document.getElementById('badHeader').innerText = "ğŸ§Ÿ å—åˆ°ä¼¤å®³ (Damage)";
            renderGrid(goodGrid, TASKS_GOOD, 'btn-mc', 'mc-icon');
            renderGrid(badGrid, TASKS_BAD, 'btn-mc negative', 'mc-icon');
        } else {
            // Chuggington æ¨¡å¼
            document.body.className = 'theme-chug';
            document.getElementById('goodHeader').innerText = "ğŸš‚ åŠ¨åŠ›åŠ é€Ÿ (Chugga!)";
            document.getElementById('badHeader').innerText = "ğŸ›‘ ç´§æ€¥åˆ¹è½¦ (Stop)";
            renderGrid(goodGrid, TASKS_GOOD, 'btn-chug', 'chug-icon');
            renderGrid(badGrid, TASKS_BAD, 'btn-chug negative', 'chug-icon');
        }

        updateDisplay();
    }

    function renderGrid(container, tasks, btnClass, iconClass) {
        container.innerHTML = tasks.map(t => `
            <div class="${btnClass}" onclick="changeScore(${t.score}, this)">
                <div class="${iconClass}">${t.icon}</div>
                <div>${t.name}</div>
                <div style="font-size:10px; opacity:0.7">${t.score > 0 ? '+' : ''}${t.score}</div>
            </div>
        `).join('');
    }

    function changeScore(amount, btnElement) {
        score += amount;
        updateLevel();
        
        // ä¿å­˜
        localStorage.setItem('score_' + currentUser, score);
        
        // æ›´æ–°UI
        updateDisplay();

        // åŠ¨ç”»åé¦ˆ
        const scoreBox = document.getElementById('scoreValue');
        scoreBox.classList.remove('pop', 'shake');
        void scoreBox.offsetWidth; // é‡ç½®åŠ¨ç”»
        
        if (amount > 0) {
            scoreBox.classList.add('pop');
        } else {
            scoreBox.classList.add('shake');
            if(navigator.vibrate) navigator.vibrate([100, 50, 100]); // éœ‡åŠ¨
        }
    }

    function updateLevel() {
        // æ¯ 200 åˆ†å‡ä¸€çº§
        level = Math.max(1, Math.floor(score / 200) + 1);
    }

    function updateDisplay() {
        document.getElementById('scoreValue').innerText = score;
        document.getElementById('levelValue').innerText = level;
    }
</script>
</body>
</html>